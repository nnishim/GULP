# Стартовая сборка на Gulp

## :memo: Описание сборки
* используются препроцессоры [Pug](https://pugjs.org/) и [SASS](https://sass-lang.com/)
* используется транспайлер [Babel](https://babeljs.io/) для поддержки современного JavaScript (ES6) в браузерах
* используется [Webpack](https://webpack.js.org/) для сборки JavaScript-модулей
* оптимизация изображений, генерация современных форматов webp и вставка с поддержкой старых браузеров
* генерация шрифтов
* создание SVG спрайтов

## :hammer_and_wrench: Установка
- установите [NodeJS](https://nodejs.org/en/)
- создайте папку с проектом
- скачайте сборку в консоли с помощью [Git](https://git-scm.com/downloads) в нужную папку: ```git clone https://github.com/Commondore/gulp-starter.git ./```
- установите ```gulp-cli``` глобально: ```npm install gulp-cli -g```
- скачайте необходимые зависимости: ```npm install```
- чтобы начать работу, введите команду: ```gulp``` (режим разработки)
- чтобы собрать проект, введите команду: ```gulp build``` (режим сборки)

---

Если вы всё сделали правильно, у вас должен открыться браузер с локальным сервером.
Режим сборки предполагает оптимизацию проекта: сжатие изображений, минифицирование CSS и JS-файлов для загрузки на сервер.

---

## :open_file_folder: Файловая структура
```
project
 ┣ gulp
 ┃ ┣ config
 ┃ ┃ ┣ path.js
 ┃ ┃ ┗ settings.js
 ┃ ┣ data
 ┃ ┗ tasks
 ┃ ┃ ┣ clean.js
 ┃ ┃ ┣ css.js
 ┃ ┃ ┣ fonts.js
 ┃ ┃ ┣ html.js
 ┃ ┃ ┣ img.js
 ┃ ┃ ┣ js.js
 ┃ ┃ ┣ pug.js
 ┃ ┃ ┣ sass.js
 ┃ ┃ ┗ sprite.js
 ┣ public
 ┣ src
 ┃ ┣ fonts
 ┃ ┣ html
 ┃ ┃ ┣ chunks
 ┃ ┃ ┃ ┗ header.html
 ┃ ┃ ┗ index.html
 ┃ ┣ img
 ┃ ┃ ┣ icons
 ┃ ┃ ┃ ┗ whatsapp.svg
 ┃ ┃ ┗ example.jpg
 ┃ ┣ js
 ┃ ┃ ┣ module
 ┃ ┃ ┃ ┗ func.js
 ┃ ┃ ┗ main.js
 ┃ ┣ pug
 ┃ ┃ ┣ chunk
 ┃ ┃ ┃ ┗ mixin.pug
 ┃ ┃ ┣ layout
 ┃ ┃ ┃ ┗ app.pug
 ┃ ┃ ┗ index.pug
 ┃ ┗ sass
 ┃ ┃ ┣ blocks
 ┃ ┃ ┃ ┣ _default.sass
 ┃ ┃ ┃ ┣ _fonts.sass
 ┃ ┃ ┃ ┣ _mixins.sass
 ┃ ┃ ┃ ┗ _settings.sass
 ┃ ┃ ┗ style.sass
 ┣ .editorconfig
 ┣ .gitignore
 ┣ gulpfile.js
 ┣ package.json
 ┗ README.md
```
* Корень папки:
    * ```.editorconfig``` — настройки редактора
    * ```.gitignore``` – запрет на отслеживание файлов Git'ом
    * ```gulpfile.js``` — настройки Gulp
    * ```package.json``` — список зависимостей
    * ```README.md``` - описание

* Папка ```src``` - используется во время разработки:
    * шрифты: ```src/fonts```
    * папка со страницами сайта без PUG: ```src/html/```
    * изображения: ```src/img```
    * папка для генерации svg - спрайта: ```src/img/icons/```
    * JS-файлы: ```src/js```
    * папка со страницами сайта: ```src/pug/```
    * служебные Pug-файлы: ```src/pug/chunk/```
    * шаблоны Pug: ```src/pug/layout/```
    * SASS-файлы: ```src/sass```

* Папка ```public``` - папка, из которой запускается локальный сервер для разработки (при запуске ```gulp```)
* Папка ```gulp``` - папка с Gulp-тасками и настройками
* Файл ```gulp/config/path.js``` - настройки путей для файлов в задачах gulp
* Файл ```gulp/config/settings.js``` - настройки для плагинов

## :keyboard: Команды
* ```gulp``` - запуск сервера для разработки проекта
* ```gulp build``` - сборка проекта в папке ```public```
* ```gulp sprite``` - генерация svg спрайта
* ```gulp pug``` - скомпилировать Pug-файлы
* ```gulp sass``` - скомпилировать Sass-файлы
* ```gulp fonts``` - собрать шрифты

## :bulb: Рекомендации по использованию

### Страницы проекта PUG
* страницы проекта находятся в папке ```src/pug/```
  * каждая страница (в том числе главная) наследует шаблон ```src/pug/layout/app.pug``` (вы можете создать и другие шаблоны)
  * главная страница: ```src/pug/index.pug```

### Страницы проекта HTML
* Вы можете использовать обычный ```html``` для этого в файле ```gulpfile.js``` замените строку ```pug``` во всех местах на ```html```
* страницы проекта находятся в папке ```src/html/```
  * Вы можете использовать ```chunks```(подключаемые html файлы) при помощи конструкции ```@@include("chunks/header.html")```

### Шрифты
* шрифты находятся в папке ```src/fonts```
  * Для каждого отдельного шрифта используйте вложенную папку
  * Вы можете использовать любые форматы шрифтов, сборка автоматически сгенерирует современные форматы```.woff``` и ```.woff2``` в папке ```public/fonts/```
  * шрифты подключаются в файл ```src/sass/blocks/_fonts.sass```
  * Для подключения шрифтов используется миксик ```+font-face```, пример есть в файле

### Изображения
* изображения находятся в папке ```src/img```
  * изображения автоматически конвертируются в формат ```.webp``` и подключаются с учетом поддержки браузеров, также при использовании изображений в ```css```

### SVG спрайты
* Для создания SVG спрайта закидываем svg иконки в папку ```src/img/icons```, в папке public будет создан файл sprite.svg
  * Для использования спрайтов в pug используйте миксин
  ```
    +svg('имя иконки', 'имя класса иконки')
  ```
